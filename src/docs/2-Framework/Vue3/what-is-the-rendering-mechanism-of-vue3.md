# vue3 的渲染机制是什么？

<article-info/>

Vue 的渲染主要是在 运行时 (runtime) 发生的。所以 Vue 的染机制和 runtime 的设计原则是分不开的。

Vue 的渲染分为三种：

- 挂载
- 更新
- 删除

同时因为 Vue3 不光支持 `浏览器染 (CSR)` 还支持 `服务端染 (SSR)`，所以 Vue 在设计 runtime 的时候，就把 runtime 分成了两个包 (还有其他的，核心是这两个)

1. 核心：`runtime-core`
2. 浏览器渲染：`runtime-dom`

其中渲染所需要的浏览器 API，都被放到了 runtime-dom 包中。

渲染的核心逻辑被放到了 runtime-core 中

当 Vue 要渲染一个 DOM 的时候

首先会从 `render 函数` 开始。render 函数会接收一个 VNode 。利用这个 VNode 执行 `patch 函数` 开始染逻辑。

在 patch 中，根据 VNode 的 type (节点类型) 进行区分。这里的节点类型就比较多了，比如：DOM、文本、注释、组件 等等

不同的类型，交给不同的方法进行处理。在方法内部再去判断当前是 挂载 还是 更新 操作

挂载和更新的细节就比较复杂了，中间涉及到 新增、删除、移动 节点的操作，还有 属性的挂载 逻辑(注意: 如果这一块不清楚的话，可以说: 细节研究的有点浅) 。

整个 Vue 的渲染逻辑其实是非常复杂的逻辑及整个 runtime 都在处理染的问题。(可以夸一下面试官: 这个问题的难度还是比较大的 😀)
