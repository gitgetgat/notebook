# Tmeplate 和 JSX 的性能孰优孰劣？

<article-info/>

JSX 性能好是指的编译快，编译快其实是构建时，但是真正的性能好是运行时

![/5de8e8ff-64f7-1632-ea87-b9e384388082.png](/5de8e8ff-64f7-1632-ea87-b9e384388082.png)

如果熟悉 Vue 的 template 模板编译的同学，会知道 Vue 在进行 template 模板编译的时候，会做各种优化，这些优化虽然会耗费构建时间，也就是构建时会比较慢，但是这些优化运用到最后产物的运行时的时候会大大提升性能

![/27ac9edd-ebbd-c620-8427-734bf9236e36.png](/27ac9edd-ebbd-c620-8427-734bf9236e36.png)

## 那 vue 模板编译的时候做了哪些有利于运行时性能的优化

Vue 在模板编译的时候，确实做了一系列的优化来提升运行时的性能。以下是 Vue2.x 在模板编译时执行的一些核心优化措施：

1. `静态内容提取`：Vue 会识别模板中的静态内容（也就是那些在任何情况下都不会改变的内容）并只渲染一次，后续的重渲染中会直接复用之前的结果。这样可以减少不必要的虚拟 DOM 的重新创建和比较。
2. `静态属性提取`：同样地，对于不会变化的属性，Vue 也会做优化处理，确保这些属性只被处理一次而不是在每次重渲染时都被处理。

3. `代码生成优化`：Vue 的模板编译器会生成优化后的代码，尽量减少运行时的开销。例如，事件监听器和绑定只会被设置一次，而不是在每次更新时都重新设置。

4. `指令和组件的懒处理`：对于某些指令和组件，Vue 会在首次访问时才进行处理，而不是在组件初始化时。这可以减少组件初始化的开销，特别是对于大型应用来说。

5. `模板预编译`：当你使用单文件组件（如 `.vue` 文件）时，模板会在构建时被编译，而不是在浏览器运行时。这意味着浏览器下载并执行 JavaScript 时没有编译开销，可以更快地启动。

6. `块级代码生成`：Vue 的编译器可以识别连续的静态节点，并将它们编译成单一的大块，从而提高运行时的性能。

`Vue3.x` 在这些基础上进行了进一步的优化，例如引入了更高效的虚拟 DOM 算法和响应系统。但从编译优化的角度看，上面列出的那些是 `Vue2.x` 和 `Vue3.x` 中都普遍存在的。

总的来说，Vue 通过这些优化确保了模板在运行时尽量少的开销，从而提供了高性能的用户体验。

## 总结

- `JSX` 构建更快，但是性能较差
- `template` 构建更慢，但是性能较好
